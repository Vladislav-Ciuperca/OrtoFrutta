sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/m/MessageToast"],function(t,e,i,o,s){"use strict";return t.extend("gestionalerepartofruttacoop.controller.View1",{onInit(){this.AddModel=new sap.ui.model.json.JSONModel;this.getView().setModel(this.AddModel,"AddProducts");this.getView().getModel("AddProducts").setProperty("/Prodotti",[]);console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti",[]));this.getRouter().getRoute("RouteView1").attachPatternMatched(this._gestioniProdottiMatched,this)},onEdit:function(){this.byId("modifica").setVisible(false);this.byId("undo").setVisible(true);this.byId("barra").setVisible(true);this.byId("input_categoria").setVisible(true);this.byId("text_categoria").setVisible(false);this.byId("input_nome").setVisible(true);this.byId("text_nome").setVisible(false);this.byId("input_quanita").setVisible(true);this.byId("text_quantita").setVisible(false);this.byId("input_prezzo").setVisible(true);this.byId("text_prezzo").setVisible(false);this.byId("input_sconto").setVisible(true);this.byId("text_sconto").setVisible(false);this.byId("input_data").setVisible(true);this.byId("text_data").setVisible(false);this.byId("input_origine").setVisible(true);this.byId("text_origine").setVisible(false);this.byId("delete").setVisible(true)},onSave:function(){this.byId("modifica").setVisible(true);this.byId("undo").setVisible(false);this.byId("input_categoria").setVisible(false);this.byId("text_categoria").setVisible(true);this.byId("input_nome").setVisible(false);this.byId("text_nome").setVisible(true);this.byId("input_quanita").setVisible(false);this.byId("text_quantita").setVisible(true);this.byId("input_prezzo").setVisible(false);this.byId("text_prezzo").setVisible(true);this.byId("input_sconto").setVisible(false);this.byId("text_sconto").setVisible(true);this.byId("input_data").setVisible(false);this.byId("text_data").setVisible(true);this.byId("input_origine").setVisible(false);this.byId("text_origine").setVisible(true);this.byId("barra").setVisible(false);this.byId("delete").setVisible(false)},onUndo:function(){this.byId("modifica").setVisible(true);this.byId("undo").setVisible(false);this.byId("barra").setVisible(false);this._gestioniProdottiMatched();this.byId("input_categoria").setVisible(false);this.byId("text_categoria").setVisible(true);this.byId("input_nome").setVisible(false);this.byId("text_nome").setVisible(true);this.byId("input_quanita").setVisible(false);this.byId("text_quantita").setVisible(true);this.byId("input_prezzo").setVisible(false);this.byId("text_prezzo").setVisible(true);this.byId("input_sconto").setVisible(false);this.byId("text_sconto").setVisible(true);this.byId("input_data").setVisible(false);this.byId("text_data").setVisible(true);this.byId("input_origine").setVisible(false);this.byId("text_origine").setVisible(true);this.byId("delete").setVisible(false)},debug:function(){console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti",[]))},onDelete:function(t){let e=this.getView().getModel("AddProducts").getProperty("/Prodotti")[i];console.log(e);o.confirm("sto cancellando");var i=t.getSource().getParent().sId.split("row")[t.getSource().getParent().sId.split("row").length-1];console.log(i);console.log("sto cancellando",this.getView().getModel("AddProducts").getProperty("/Prodotti")[i]);this.getView().getModel("AddProducts").getProperty("/Prodotti").splice(i,1);console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti"));var s=this.getView().getModel("AddProducts").getProperty("/Prodotti");this.getView().getModel("AddProducts").setProperty("/Prodotti",s)},add:function(){this.byId("barra").setVisible(true);const t={categoria:"",prodotto:"",giacenza:"",prezzo_unitario:"",sconto:"",data_aggiornamento:(new Date).toISOString(),origine:""};this.getView().getModel("AddProducts").getProperty("/Prodotti").push(t);let e=this.getView().getModel("AddProducts").getProperty("/Prodotti");this.getView().getModel("AddProducts").setProperty("/Prodotti",e);console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti"));this.byId("modifica").firePress()},debug:function(){console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti"))},getArray:function(){const t=[];const e={categoria:this.byId("inputCategoria").getValue(),prodotto:this.byId("inputProdotto").getValue(),giacenza:this.byId("inputGiacenza").getValue(),prezzo_unitario:this.byId("inputPrezzo").getValue(),sconto:this.byId("inputSconto").getValue(),data_aggiornamento:(new Date).toISOString(),origine:this.byId("inputOrigine").getValue()};t.push(e);console.log(t)},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},_gestioniProdottiMatched:function(){var t=this.getOwnerComponent().getModel().sServiceUrl;var e=this;e.makeAjaxRequest(t+"fruttarolo",function(t){console.log(t.value);e.getView().getModel("AddProducts").setProperty("/Prodotti",t.value)}.bind(e),function(t){}.bind(e))},makeAjaxRequest:function(t,e,i){jQuery.ajax({url:t,dataType:"json",success:function(t){if(typeof e==="function"){e(t)}},error:function(t){if(typeof i==="function"){i(t)}}})},getArray:function(){console.log(this.getView().getModel("AddProducts").getProperty("/Prodotti"))},save:function(){var t=this.getView().getModel("AddProducts").getProperty("/categoria");var e=this.getView().getModel("AddProducts").getProperty("/prodotto");var i=this.getView().getModel("AddProducts").getProperty("/quantita_giacenza");var o=this.getView().getModel("AddProducts").getProperty("/prezzo_unitario");var s=this.getView().getModel("AddProducts").getProperty("/data_aggiornamento");var r=this.getView().getModel("AddProducts").getProperty("/sconto");var d=this.getView().getModel("AddProducts").getProperty("/origine");var a={categoria:t,prodotto:e,quantita_giacenza:i,prezzo_unitario:o,data_aggiornamento:s,sconto:r,origine:d};var n=this.getOwnerComponent().getModel().sServiceUrl;jQuery.ajax({url:n+"fruttarolo",contentType:"application/json",type:"POST",data:JSON.stringify(a),dataType:"json",success:function(){console.log("bella li")},error:function(){console.log("belloooooooooo")}})}})});
//# sourceMappingURL=View1.controller.js.map